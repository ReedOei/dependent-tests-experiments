{
  "version": "1.0",
  "stacks": [
    {
      "name": "HDP",
      "old-version": "2.0",
      "target-version": "2.2",
      "options": {
        "config-types": {
          "core-site": {
            "merged-copy": "yes"
          },
          "hdfs-site": {
            "merged-copy": "yes"
          },
          "hbase-site": {
            "merged-copy": "yes"
          },
          "hive-site": {
            "merged-copy": "yes"
          },
          "yarn-site": {
            "merged-copy": "yes"
          },
          "mapred-site": {
            "merged-copy": "yes"
          },
          "oozie-site": {
            "merged-copy": "yes"
          },
          "webhcat-site": {
            "merged-copy": "yes"
          }
        }
      },
      "properties": {
        "webhcat-site": {
          "templeton.storage.class": "org.apache.hive.hcatalog.templeton.tool.ZooKeeperStorage",
          "templeton.port": "50111"
        },
        "oozie-site": {
          "oozie.authentication.simple.anonymous.allowed": "true",
          "oozie.service.coord.check.maximum.frequency": "false",
          "oozie.service.ELService.ext.functions.coord-action-create": "now=org.apache.oozie.extensions.OozieELExtensions#ph2_now,today=org.apache.oozie.extensions.OozieELExtensions#ph2_today,yesterday=org.apache.oozie.extensions.OozieELExtensions#ph2_yesterday,currentMonth=org.apache.oozie.extensions.OozieELExtensions#ph2_currentMonth,lastMonth=org.apache.oozie.extensions.OozieELExtensions#ph2_lastMonth,currentYear=org.apache.oozie.extensions.OozieELExtensions#ph2_currentYear,lastYear=org.apache.oozie.extensions.OozieELExtensions#ph2_lastYear,latest=org.apache.oozie.coord.CoordELFunctions#ph2_coord_latest_echo,future=org.apache.oozie.coord.CoordELFunctions#ph2_coord_future_echo,formatTime=org.apache.oozie.coord.CoordELFunctions#ph2_coord_formatTime,user=org.apache.oozie.coord.CoordELFunctions#coord_user",
          "oozie.service.ELService.ext.functions.coord-action-create-inst": "now=org.apache.oozie.extensions.OozieELExtensions#ph2_now_inst,today=org.apache.oozie.extensions.OozieELExtensions#ph2_today_inst,yesterday=org.apache.oozie.extensions.OozieELExtensions#ph2_yesterday_inst,currentMonth=org.apache.oozie.extensions.OozieELExtensions#ph2_currentMonth_inst,lastMonth=org.apache.oozie.extensions.OozieELExtensions#ph2_lastMonth_inst,currentYear=org.apache.oozie.extensions.OozieELExtensions#ph2_currentYear_inst,lastYear=org.apache.oozie.extensions.OozieELExtensions#ph2_lastYear_inst,latest=org.apache.oozie.coord.CoordELFunctions#ph2_coord_latest_echo,future=org.apache.oozie.coord.CoordELFunctions#ph2_coord_future_echo,formatTime=org.apache.oozie.coord.CoordELFunctions#ph2_coord_formatTime,user=org.apache.oozie.coord.CoordELFunctions#coord_user",
          "oozie.service.ELService.ext.functions.coord-action-start": "now=org.apache.oozie.extensions.OozieELExtensions#ph2_now,today=org.apache.oozie.extensions.OozieELExtensions#ph2_today,yesterday=org.apache.oozie.extensions.OozieELExtensions#ph2_yesterday,currentMonth=org.apache.oozie.extensions.OozieELExtensions#ph2_currentMonth,lastMonth=org.apache.oozie.extensions.OozieELExtensions#ph2_lastMonth,currentYear=org.apache.oozie.extensions.OozieELExtensions#ph2_currentYear,lastYear=org.apache.oozie.extensions.OozieELExtensions#ph2_lastYear,latest=org.apache.oozie.coord.CoordELFunctions#ph3_coord_latest,future=org.apache.oozie.coord.CoordELFunctions#ph3_coord_future,dataIn=org.apache.oozie.extensions.OozieELExtensions#ph3_dataIn,instanceTime=org.apache.oozie.coord.CoordELFunctions#ph3_coord_nominalTime,dateOffset=org.apache.oozie.coord.CoordELFunctions#ph3_coord_dateOffset,formatTime=org.apache.oozie.coord.CoordELFunctions#ph3_coord_formatTime,user=org.apache.oozie.coord.CoordELFunctions#coord_user",
          "oozie.service.ELService.ext.functions.coord-job-submit-data": "now=org.apache.oozie.extensions.OozieELExtensions#ph1_now_echo,today=org.apache.oozie.extensions.OozieELExtensions#ph1_today_echo,yesterday=org.apache.oozie.extensions.OozieELExtensions#ph1_yesterday_echo,currentMonth=org.apache.oozie.extensions.OozieELExtensions#ph1_currentMonth_echo,lastMonth=org.apache.oozie.extensions.OozieELExtensions#ph1_lastMonth_echo,currentYear=org.apache.oozie.extensions.OozieELExtensions#ph1_currentYear_echo,lastYear=org.apache.oozie.extensions.OozieELExtensions#ph1_lastYear_echo,dataIn=org.apache.oozie.extensions.OozieELExtensions#ph1_dataIn_echo,instanceTime=org.apache.oozie.coord.CoordELFunctions#ph1_coord_nominalTime_echo_wrap,formatTime=org.apache.oozie.coord.CoordELFunctions#ph1_coord_formatTime_echo,dateOffset=org.apache.oozie.coord.CoordELFunctions#ph1_coord_dateOffset_echo,user=org.apache.oozie.coord.CoordELFunctions#coord_user",
          "oozie.service.ELService.ext.functions.coord-job-submit-instances": "now=org.apache.oozie.extensions.OozieELExtensions#ph1_now_echo,today=org.apache.oozie.extensions.OozieELExtensions#ph1_today_echo,yesterday=org.apache.oozie.extensions.OozieELExtensions#ph1_yesterday_echo,currentMonth=org.apache.oozie.extensions.OozieELExtensions#ph1_currentMonth_echo,lastMonth=org.apache.oozie.extensions.OozieELExtensions#ph1_lastMonth_echo,currentYear=org.apache.oozie.extensions.OozieELExtensions#ph1_currentYear_echo,lastYear=org.apache.oozie.extensions.OozieELExtensions#ph1_lastYear_echo,formatTime=org.apache.oozie.coord.CoordELFunctions#ph1_coord_formatTime_echo,latest=org.apache.oozie.coord.CoordELFunctions#ph2_coord_latest_echo,future=org.apache.oozie.coord.CoordELFunctions#ph2_coord_future_echo",
          "oozie.service.ELService.ext.functions.coord-sla-create": "instanceTime=org.apache.oozie.coord.CoordELFunctions#ph2_coord_nominalTime,user=org.apache.oozie.coord.CoordELFunctions#coord_user",
          "oozie.service.ELService.ext.functions.coord-sla-submit": "instanceTime=org.apache.oozie.coord.CoordELFunctions#ph1_coord_nominalTime_echo_fixed,user=org.apache.oozie.coord.CoordELFunctions#coord_user",
          "oozie.service.HadoopAccessorService.kerberos.enabled": "false",
          "oozie.service.HadoopAccessorService.supported.filesystems": "*",
          "oozie.service.SchemaService.wf.ext.schemas": "shell-action-0.1.xsd,shell-action-0.2.xsd,shell-action-0.3.xsd,email-action-0.1.xsd,email-action-0.2.xsd,hive-action-0.2.xsd,hive-action-0.3.xsd,hive-action-0.4.xsd,hive-action-0.5.xsd,sqoop-action-0.2.xsd,sqoop-action-0.3.xsd,sqoop-action-0.4.xsd,ssh-action-0.1.xsd,ssh-action-0.2.xsd,distcp-action-0.1.xsd,distcp-action-0.2.xsd,oozie-sla-0.1.xsd,oozie-sla-0.2.xsd",
          "oozie.services.ext": "org.apache.oozie.service.JMSAccessorService,org.apache.oozie.service.PartitionDependencyManagerService,org.apache.oozie.service.HCatAccessorService"
        },
        "mapred-site": {
          "mapreduce.job.emit-timeline-data": "false",
          "mapreduce.jobhistory.bind-host": "0.0.0.0",
          "mapreduce.reduce.shuffle.fetch.retry.enabled": "1",
          "mapreduce.reduce.shuffle.fetch.retry.interval-ms": "1000",
          "mapreduce.reduce.shuffle.fetch.retry.timeout-ms": "30000",
          "mapreduce.admin.map.child.java.opts": "-server -XX:NewRatio=8 -Djava.net.preferIPv4Stack=true -Dhdp.version=${hdp.version}",
          "mapreduce.admin.reduce.child.java.opts": "-server -XX:NewRatio=8 -Djava.net.preferIPv4Stack=true -Dhdp.version=${hdp.version}",
          "mapreduce.map.java.opts": "-Xmx546m",
          "mapreduce.map.memory.mb": "682",
          "mapreduce.reduce.java.opts": "-Xmx546m",
          "mapreduce.task.io.sort.mb": "273",
          "yarn.app.mapreduce.am.admin-command-opts": "-Dhdp.version=${hdp.version}",
          "yarn.app.mapreduce.am.command-opts": "-Xmx546m -Dhdp.version=${hdp.version}",
          "yarn.app.mapreduce.am.resource.mb": "682",
          "mapreduce.application.framework.path": "/hdp/apps/${hdp.version}/mapreduce/mapreduce.tar.gz#mr-framework",
          "mapreduce.application.classpath": "$PWD/mr-framework/hadoop/share/hadoop/mapreduce/*:$PWD/mr-framework/hadoop/share/hadoop/mapreduce/lib/*:$PWD/mr-framework/hadoop/share/hadoop/common/*:$PWD/mr-framework/hadoop/share/hadoop/common/lib/*:$PWD/mr-framework/hadoop/share/hadoop/yarn/*:$PWD/mr-framework/hadoop/share/hadoop/yarn/lib/*:$PWD/mr-framework/hadoop/share/hadoop/hdfs/*:$PWD/mr-framework/hadoop/share/hadoop/hdfs/lib/*:$PWD/mr-framework/hadoop/share/hadoop/tools/lib/*:/usr/hdp/${hdp.version}/hadoop/lib/hadoop-lzo-0.6.0.${hdp.version}.jar:/etc/hadoop/conf/secure",
          "mapreduce.admin.user.env": "LD_LIBRARY_PATH=/usr/hdp/${hdp.version}/hadoop/lib/native:/usr/hdp/${hdp.version}/hadoop/lib/native/Linux-amd64-64"
        },
        "yarn-site": {
          "yarn.timeline-service.leveldb-timeline-store.path": "/var/log/hadoop-yarn/timeline",
          "yarn.timeline-service.leveldb-timeline-store.ttl-interval-ms": "300000",
          "yarn.timeline-service.store-class": "org.apache.hadoop.yarn.server.timeline.LeveldbTimelineStore",
          "yarn.timeline-service.ttl-enable": "true",
          "yarn.timeline-service.ttl-ms": "2678400000",
          "yarn.timeline-service.generic-application-history.store-class": "org.apache.hadoop.yarn.server.applicationhistoryservice.NullApplicationHistoryStore",
          "hadoop.registry.rm.enabled": "false",
          "yarn.client.nodemanager-connect.max-wait-ms": "900000",
          "yarn.client.nodemanager-connect.retry-interval-ms": "10000",
          "yarn.node-labels.fs-store.retry-policy-spec": "2000, 500",
          "yarn.node-labels.fs-store.root-dir": "/system/yarn/node-labels",
          "yarn.node-labels.manager-class": "org.apache.hadoop.yarn.server.resourcemanager.nodelabels.MemoryRMNodeLabelsManager",
          "yarn.nodemanager.bind-host": "0.0.0.0",
          "yarn.nodemanager.disk-health-checker.max-disk-utilization-per-disk-percentage": "90",
          "yarn.nodemanager.disk-health-checker.min-free-space-per-disk-mb": "1000",
          "yarn.nodemanager.linux-container-executor.cgroups.hierarchy": "hadoop-yarn",
          "yarn.nodemanager.linux-container-executor.cgroups.mount": "false",
          "yarn.nodemanager.linux-container-executor.cgroups.strict-resource-usage": "false",
          "yarn.nodemanager.linux-container-executor.resources-handler.class": "org.apache.hadoop.yarn.server.nodemanager.util.DefaultLCEResourcesHandler",
          "yarn.nodemanager.log-aggregation.debug-enabled": "false",
          "yarn.nodemanager.log-aggregation.num-log-files-per-app": "30",
          "yarn.nodemanager.log-aggregation.roll-monitoring-interval-seconds": "-1",
          "yarn.nodemanager.recovery.dir": "/var/log/hadoop-yarn/nodemanager/recovery-state",
          "yarn.nodemanager.recovery.enabled": "false",
          "yarn.nodemanager.resource.cpu-vcores": "1",
          "yarn.nodemanager.resource.percentage-physical-cpu-limit": "100",
          "yarn.resourcemanager.bind-host": "0.0.0.0",
          "yarn.resourcemanager.connect.max-wait.ms": "900000",
          "yarn.resourcemanager.connect.retry-interval.ms": "30000",
          "yarn.resourcemanager.fs.state-store.retry-policy-spec": "2000, 500",
          "yarn.resourcemanager.fs.state-store.uri": " ",
          "yarn.resourcemanager.ha.enabled": "false",
          "yarn.resourcemanager.recovery.enabled": "false",
          "yarn.resourcemanager.state-store.max-completed-applications": "${yarn.resourcemanager.max-completed-applications}",
          "yarn.resourcemanager.store.class": "org.apache.hadoop.yarn.server.resourcemanager.recovery.ZKRMStateStore",
          "yarn.resourcemanager.system-metrics-publisher.dispatcher.pool-size": "10",
          "yarn.resourcemanager.system-metrics-publisher.enabled": "true",
          "yarn.resourcemanager.webapp.delegation-token-auth-filter.enabled": "false",
          "yarn.resourcemanager.work-preserving-recovery.enabled": "false",
          "yarn.resourcemanager.work-preserving-recovery.scheduling-wait-ms": "10000",
          "yarn.resourcemanager.zk-acl": "world:anyone:rwcda",
          "yarn.resourcemanager.zk-address": {
            "value": "{ZOOKEEPER_QUORUM}",
            "template": "yes"
          },
          "yarn.resourcemanager.zk-num-retries": "1000",
          "yarn.resourcemanager.zk-retry-interval-ms": "1000",
          "yarn.resourcemanager.zk-state-store.parent-path": "/rmstore",
          "yarn.resourcemanager.zk-timeout-ms": "10000",
          "yarn.timeline-service.bind-host": "0.0.0.0",
          "yarn.timeline-service.client.max-retries": "30",
          "yarn.timeline-service.client.retry-interval-ms": "1000",
          "yarn.timeline-service.enabled": "true",
          "yarn.timeline-service.http-authentication.simple.anonymous.allowed": "true",
          "yarn.timeline-service.http-authentication.type": "simple",
          "yarn.timeline-service.leveldb-timeline-store.read-cache-size": "104857600",
          "yarn.timeline-service.leveldb-timeline-store.start-time-read-cache-size": "10000",
          "yarn.timeline-service.leveldb-timeline-store.start-time-write-cache-size": "10000"
        },
        "hive-site": {
          "hive.execution.engine": "mr",
          "hive.exec.failure.hooks": "org.apache.hadoop.hive.ql.hooks.ATSHook",
          "hive.exec.post.hooks": "org.apache.hadoop.hive.ql.hooks.ATSHook",
          "hive.exec.pre.hooks": "org.apache.hadoop.hive.ql.hooks.ATSHook",
          "datanucleus.cache.level2.type": "none",
          "hive.auto.convert.sortmerge.join.to.mapjoin": "false",
          "hive.cbo.enable": "true",
          "hive.cli.print.header": "false",
          "hive.cluster.delegation.token.store.class": "org.apache.hadoop.hive.thrift.ZooKeeperTokenStore",
          "hive.cluster.delegation.token.store.zookeeper.znode": "/hive/cluster/delegation",
          "hive.compactor.abortedtxn.threshold": "1000",
          "hive.compactor.check.interval": "300L",
          "hive.compactor.delta.num.threshold": "10",
          "hive.compactor.delta.pct.threshold": "0.1f",
          "hive.compactor.initiator.on": "false",
          "hive.compactor.worker.threads": "0",
          "hive.compactor.worker.timeout": "86400L",
          "hive.compute.query.using.stats": "true",
          "hive.conf.restricted.list": "hive.security.authenticator.manager,hive.security.authorization.manager,hive.users.in.admin.role",
          "hive.convert.join.bucket.mapjoin.tez": "false",
          "hive.enforce.sortmergebucketmapjoin": "true",
          "hive.exec.compress.intermediate": "false",
          "hive.exec.compress.output": "false",
          "hive.exec.dynamic.partition": "true",
          "hive.exec.dynamic.partition.mode": "nonstrict",
          "hive.exec.max.created.files": "100000",
          "hive.exec.max.dynamic.partitions": "5000",
          "hive.exec.max.dynamic.partitions.pernode": "2000",
          "hive.exec.orc.compression.strategy": "SPEED",
          "hive.exec.orc.default.compress": "ZLIB",
          "hive.exec.orc.default.stripe.size": "67108864",
          "hive.exec.parallel": "false",
          "hive.exec.parallel.thread.number": "8",
          "hive.exec.reducers.bytes.per.reducer": "67108864",
          "hive.exec.reducers.max": "1009",
          "hive.exec.scratchdir": "/tmp/hive",
          "hive.exec.submit.local.task.via.child": "true",
          "hive.exec.submitviachild": "false",
          "hive.fetch.task.aggr": "false",
          "hive.fetch.task.conversion": "more",
          "hive.fetch.task.conversion.threshold": "1073741824",
          "hive.limit.optimize.enable": "true",
          "hive.limit.pushdown.memory.usage": "0.04",
          "hive.map.aggr.hash.force.flush.memory.threshold": "0.9",
          "hive.map.aggr.hash.min.reduction": "0.5",
          "hive.map.aggr.hash.percentmemory": "0.5",
          "hive.mapjoin.optimized.hashtable": "true",
          "hive.merge.mapfiles": "true",
          "hive.merge.mapredfiles": "false",
          "hive.merge.orcfile.stripe.level": "true",
          "hive.merge.rcfile.block.level": "true",
          "hive.merge.size.per.task": "256000000",
          "hive.merge.smallfiles.avgsize": "16000000",
          "hive.merge.tezfiles": "false",
          "hive.metastore.authorization.storage.checks": "false",
          "hive.metastore.client.connect.retry.delay": "5s",
          "hive.metastore.connect.retries": "24",
          "hive.metastore.failure.retries": "24",
          "hive.metastore.kerberos.keytab.file": "/etc/security/keytabs/hive.service.keytab",
          "hive.metastore.kerberos.principal": "hive/_HOST@EXAMPLE.COM",
          "hive.metastore.server.max.threads": "100000",
          "hive.optimize.constant.propagation": "true",
          "hive.optimize.metadataonly": "true",
          "hive.optimize.null.scan": "true",
          "hive.optimize.sort.dynamic.partition": "false",
          "hive.orc.compute.splits.num.threads": "10",
          "hive.orc.splits.include.file.footer": "false",
          "hive.prewarm.enabled": "false",
          "hive.prewarm.numcontainers": "10",
          "hive.security.metastore.authenticator.manager": "org.apache.hadoop.hive.ql.security.HadoopDefaultMetastoreAuthenticator",
          "hive.security.metastore.authorization.auth.reads": "true",
          "hive.server2.allow.user.substitution": "true",
          "hive.server2.authentication.spnego.keytab": "HTTP/_HOST@EXAMPLE.COM",
          "hive.server2.authentication.spnego.principal": "/etc/security/keytabs/spnego.service.keytab",
          "hive.server2.logging.operation.enabled": "true",
          "hive.server2.logging.operation.log.location": "/tmp/hive/operation_logs",
          "hive.server2.table.type.mapping": "CLASSIC",
          "hive.server2.tez.default.queues": "default",
          "hive.server2.tez.sessions.per.default.queue": "1",
          "hive.server2.thrift.http.path": "cliservice",
          "hive.server2.thrift.http.port": "10001",
          "hive.server2.thrift.max.worker.threads": "500",
          "hive.server2.thrift.sasl.qop": "auth",
          "hive.server2.transport.mode": "binary",
          "hive.server2.use.SSL": "false",
          "hive.smbjoin.cache.rows": "10000",
          "hive.stats.autogather": "true",
          "hive.stats.dbclass": "fs",
          "hive.stats.fetch.column.stats": "false",
          "hive.stats.fetch.partition.stats": "true",
          "hive.support.concurrency": "false",
          "hive.tez.auto.reducer.parallelism": "false",
          "hive.tez.cpu.vcores": "-1",
          "hive.tez.dynamic.partition.pruning": "true",
          "hive.tez.dynamic.partition.pruning.max.data.size": "104857600",
          "hive.tez.dynamic.partition.pruning.max.event.size": "1048576",
          "hive.tez.input.format": "org.apache.hadoop.hive.ql.io.HiveInputFormat",
          "hive.tez.log.level": "INFO",
          "hive.tez.max.partition.factor": "2.0",
          "hive.tez.min.partition.factor": "0.25",
          "hive.tez.smb.number.waves": "0.5",
          "hive.txn.manager": "org.apache.hadoop.hive.ql.lockmgr.DummyTxnManager",
          "hive.txn.max.open.batch": "1000",
          "hive.txn.timeout": "300",
          "hive.user.install.directory": "/user/",
          "hive.vectorized.execution.reduce.enabled": "false",
          "hive.vectorized.groupby.checkinterval": "4096",
          "hive.vectorized.groupby.flush.percent": "0.1",
          "hive.vectorized.groupby.maxentries": "100000",
          "hive.zookeeper.client.port": "2181",
          "hive.zookeeper.namespace": "hive_zookeeper_namespace",
          "hive.auto.convert.join.noconditionaltask.size": "238026752",
          "hive.metastore.client.socket.timeout": "1800s",
          "hive.optimize.reducededuplication.min.reducer": "4",
          "hive.security.authorization.manager": "org.apache.hadoop.hive.ql.security.authorization.plugin.sqlstd.SQLStdConfOnlyAuthorizerFactory",
          "hive.security.metastore.authorization.manager": "org.apache.hadoop.hive.ql.security.authorization.StorageBasedAuthorizationProvider,org.apache.hadoop.hive.ql.security.authorization.MetaStoreAuthzAPIAuthorizerEmbedOnly",
          "hive.server2.support.dynamic.service.discovery": "true",
          "hive.tez.container.size": "682",
          "hive.tez.java.opts": "-server -Xmx546m -Djava.net.preferIPv4Stack=true -XX:NewRatio=8 -XX:+UseNUMA -XX:+UseParallelGC -XX:+PrintGCDetails -verbose:gc -XX:+PrintGCTimeStamps",
          "fs.file.impl.disable.cache": "true",
          "fs.hdfs.impl.disable.cache": "true"
        },
        "core-site": {
          "hadoop.proxyuser.falcon.groups": "users",
          "hadoop.proxyuser.falcon.hosts": "*"
        },
        "hdfs-site": {
          "dfs.namenode.startup.delay.block.deletion.sec": "3600",
          "dfs.datanode.max.transfer.threads": "4096"
        },
        "hbase-site": {
          "hbase.hregion.majorcompaction.jitter": "0.50",
          "hbase.hregion.majorcompaction": "604800000",
          "hbase.hregion.memstore.block.multiplier": "4",
          "hbase.hstore.flush.retries.number": {"remove": "yes"}
        }
      }
    }
  ]
}
